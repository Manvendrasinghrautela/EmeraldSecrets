{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/affiliate.css' %}">
{% endblock %}

{% block content %}
<section class="affiliate-dashboard">
    <div class="page-header">
        <h1>Affiliate Settings</h1>
        <a href="{% url 'affiliate:dashboard' %}" class="btn btn-outline">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
    </div>

    <div class="settings-container">
        <!-- Profile Settings -->
        <div class="settings-card">
            <h2><i class="fas fa-user"></i> Profile Information</h2>
            <form method="post" class="settings-form">
                {% csrf_token %}
                <div class="form-row">
                    <div class="form-group">
                        <label>First Name</label>
                        <input type="text" name="first_name" value="{{ user.first_name }}" required>
                    </div>
                    <div class="form-group">
                        <label>Last Name</label>
                        <input type="text" name="last_name" value="{{ user.last_name }}" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" name="email" value="{{ user.email }}" required>
                </div>

                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" name="phone" placeholder="+91 98765 43210">
                </div>

                <button type="submit" class="btn btn-primary">Update Profile</button>
            </form>
        </div>

        <!-- Payment Settings -->
        <div class="settings-card">
            <h2><i class="fas fa-credit-card"></i> Payment Information</h2>
            <form method="post" action="{% url 'affiliate:update_payment' %}" class="settings-form">
                {% csrf_token %}
                
                <div class="form-group">
                    <label>Payment Method</label>
                    <select name="payment_method" required>
                        <option value="bank_transfer">Bank Transfer</option>
                        <option value="upi">UPI</option>
                        <option value="paypal">PayPal</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Account Holder Name</label>
                    <input type="text" name="account_name" required>
                </div>

                <div class="form-group">
                    <label>Account Number / UPI ID</label>
                    <input type="text" name="account_number" placeholder="1234567890 or user@upi" required>
                </div>

                <div class="form-group">
                    <label>Bank Name / Provider</label>
                    <input type="text" name="bank_name" placeholder="State Bank of India">
                </div>

                <div class="form-group">
                    <label>IFSC Code (for bank transfer)</label>
                    <input type="text" name="ifsc_code" placeholder="SBIN0001234">
                </div>

                <button type="submit" class="btn btn-primary">Save Payment Info</button>
            </form>
        </div>

        <!-- Notification Settings -->
        <div class="settings-card">
            <h2><i class="fas fa-bell"></i> Notification Preferences</h2>
            <form method="post" action="{% url 'affiliate:update_notifications' %}" class="settings-form">
                {% csrf_token %}
                
                <div class="checkbox-group">
                    <input type="checkbox" id="email_sales" name="email_sales" checked>
                    <label for="email_sales">Email me when I make a sale</label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="email_weekly" name="email_weekly" checked>
                    <label for="email_weekly">Send weekly performance summary</label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="email_monthly" name="email_monthly">
                    <label for="email_monthly">Send monthly earning reports</label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="email_promotions" name="email_promotions" checked>
                    <label for="email_promotions">Notify me about new promotional campaigns</label>
                </div>

                <button type="submit" class="btn btn-primary">Update Preferences</button>
            </form>
        </div>

        <!-- Minimum Payout -->
        <div class="settings-card">
            <h2><i class="fas fa-money-bill"></i> Payout Settings</h2>
            <form method="post" action="{% url 'affiliate:update_payout' %}" class="settings-form">
                {% csrf_token %}
                
                <div class="form-group">
                    <label>Minimum Payout Amount</label>
                    <select name="min_payout">
                        <option value="1000">₹1,000</option>
                        <option value="2000">₹2,000</option>
                        <option value="5000" selected>₹5,000</option>
                        <option value="10000">₹10,000</option>
                    </select>
                    <small class="form-hint">Payouts will be processed when your balance reaches this amount</small>
                </div>

                <div class="form-group">
                    <label>Payout Schedule</label>
                    <select name="payout_schedule">
                        <option value="weekly">Weekly</option>
                        <option value="monthly" selected>Monthly</option>
                    </select>
                </div>

                <button type="submit" class="btn btn-primary">Update Payout Settings</button>
            </form>
        </div>
    </div>
</section>
{% endblock %}
